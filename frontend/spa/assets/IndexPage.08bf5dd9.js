import{c as b,b as k,i as u,R as Q}from"./QBtn.feca8f7c.js";import{u as C,a as B,Q as D,b as w,c as L,d as $,e as M}from"./compiler-core.esm-bundler.0f61fde6.js";import{c as S,h as I,g as z,_ as P,A as T,r as R,C as i,Q as h,G as t,F as r,E as l,I as v,R as x,S as m,H as d,D as f,w as V}from"./index.d2329cae.js";import{a as g,l as j,i as E}from"./axios.399f11d0.js";var y=b({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(s,{slots:o}){const a=S(()=>`q-card__section q-card__section--${s.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>I(s.tag,{class:a.value},k(o.default))}}),q=b({name:"QCard",props:{...C,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(s,{slots:o}){const{proxy:{$q:a}}=z(),c=B(s,a),n=S(()=>"q-card"+(c.value===!0?" q-card--dark q-dark":"")+(s.bordered===!0?" q-card--bordered":"")+(s.square===!0?" q-card--square no-border-radius":"")+(s.flat===!0?" q-card--flat no-shadow":""));return()=>I(s.tag,{class:n.value},k(o.default))}});const F=T({data(){return{name:"M17 Dashboard",station_rows:[],modules:[],pagination:R({rowsPerPage:0}),intervalId:null}},mounted(){this.fetchMetadata(),this.fetchStationsList(),this.intervalId=setInterval(()=>{this.fetchStationsList()},2e4)},beforeRouteLeave(s,o,a){clearInterval(this.intervalId),a()},methods:{fetchMetadata(){let s="json/metadata";g.get(s).then(o=>{this.metadata=o.data}).catch(o=>{console.error(o)})},fetchStationsList(){let s="json/stations";g.get(s).then(a=>{let c=a.data;c.stations.forEach(function(n,_){n.id=_+1,n.lastheardlocal=j(n.lastheard),n.txactive=E(n.lastheard),c.stations[_]=n}),this.station_rows=c.stations,c.stations.length>0&&(c.stations[0].txactive==!0?this.name="TX: "+c.stations[0].callsign:this.name=this.metadata.reflector_callsign+" Dashboard",document.title=this.name)}).catch(a=>{console.error(a)});let o="json/modulesinuse";g.get(o).then(a=>{this.modules=a.data}).catch(a=>{console.error(a)})}}}),N={class:"q-pa-sm"},A={class:"row"},H={class:"col-xs-12 col-sm-10 col-md-8"},G={class:"q-pa-md"},O=t("th",{class:"gt-xs text-right",style:{"max-width":"50px"}},"#",-1),U=t("th",{class:"text-center",style:{"max-width":"50px"}},"Flag",-1),X={class:"text-center",style:{"max-width":"150px"}},J=t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"Suffix",-1),K=t("th",{class:"gt-xs text-left",style:{"max-width":"80px"}},"Destination",-1),W=t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"Mode",-1),Y=t("th",{class:"gt-xs text-left",style:{"max-width":"80px"}},"Via/Peer",-1),Z=t("th",{class:"text-left",style:{"max-width":"50px"}},"Module",-1),tt=t("th",{class:"text-left",style:{"max-width":"150px"}},"Last Heard",-1),et={class:"gt-xs text-right",style:{"max-width":"50px"}},st={class:"text-center",style:{"max-width":"50px"}},at=["src"],lt={class:"text-center",style:{"max-width":"150px"}},ot={class:"gt-xs text-left",style:{"max-width":"50px"}},dt={class:"gt-xs text-left",style:{"max-width":"80px"}},rt={class:"gt-xs text-left",style:{"max-width":"50px"}},ct={class:"gt-xs text-left",style:{"max-width":"80px"}},nt={class:"text-left",style:{"max-width":"50px"}},it={class:"text-left",style:{"max-width":"150px"}},ht={class:"col-xs-12 col-sm-5 col-md-4"},_t={class:"q-pa-sm"},ut=t("div",{align:"center"},"Modules In Use",-1),xt={class:"q-pa-sm"},mt={class:"row"},ft={class:"text-h6"};function gt(s,o,a,c,n,_){return i(),h("div",N,[t("div",A,[t("div",H,[t("div",G,[r(D,null,{default:l(()=>[t("thead",null,[t("tr",null,[O,U,t("th",X,[r(u,{flat:"","no-caps":""},{default:l(()=>[v("Callsign")]),_:1})]),J,K,W,Y,Z,tt])]),t("tbody",null,[(i(!0),h(x,null,m(s.station_rows,e=>(i(),h("tr",{key:e},[t("td",et,d(e.id),1),t("td",st,[t("img",{width:"30",src:`flags/${e.country.countrycode}.png`},null,8,at)]),t("td",lt,[e.txactive==!0?(i(),f(u,{key:0,"icon-right":"campaign",color:"red","text-color":"white",href:`https://www.qrz.com/db/${e.callsign}`,target:"_blank"},{default:l(()=>[t("u",null,d(e.callsign),1)]),_:2},1032,["href"])):(i(),f(u,{key:1,flat:"",href:`https://www.qrz.com/db/${e.callsign}`,target:"_blank"},{default:l(()=>[t("u",null,d(e.callsign),1)]),_:2},1032,["href"]))]),t("td",ot,d(e.callsignsuffix),1),t("td",dt,d(e.destination),1),t("td",rt,d(e.mode),1),t("td",ct,d(e.via),1),t("td",nt,d(e.onmodule),1),t("td",it,d(e.lastheardlocal),1)]))),128))])]),_:1})])]),t("div",ht,[t("div",_t,[r(q,null,{default:l(()=>[r(y,null,{default:l(()=>[ut,t("div",xt,[t("div",mt,[(i(!0),h(x,null,m(s.modules,e=>(i(),h("div",{class:"col-6 q-pa-sm",key:e.name},[r(q,{class:"mycard"},{default:l(()=>[r(y,null,{default:l(()=>[r(w,{header:"",align:"center"},{default:l(()=>[t("div",ft,d(e.name),1)]),_:2},1024),r(w,{align:"center"},{default:l(()=>[r(L,{bordered:"",separator:""},{default:l(()=>[(i(!0),h(x,null,m(e.callsigns,p=>V((i(),f($,{clickable:"",key:p},{default:l(()=>[r(M,null,{default:l(()=>[v(d(p),1)]),_:2},1024)]),_:2},1024)),[[Q]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1})]),_:1})])])])])}var qt=P(F,[["render",gt]]);export{qt as default};
